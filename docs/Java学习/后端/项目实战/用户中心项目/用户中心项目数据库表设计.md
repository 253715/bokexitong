---
tags:
  - Java项目实战
  - SpringBoot
  - 用户中心项目
readingTime: true
date: 2025-05-08 10:52:24
recommend: ['用户中心项目',3]
---

# 用户中心项目数据库表设计

## 参考笔记

>https://uold3d6685.feishu.cn/wiki/IOTZwd7g0iS7NOkHCIHcp0q4n8S


## 数据库表设计

1. 什么是数据库？  **存数据的​**
2. 数据库里有什么？  **数据表（理解为 excel 表格）​**
3. Java 操作数据库，**代替人工​**
4. 什么是设计数据库表？​
5. 有哪些表（模型）？**表中有哪些字段？字段的类型？数据库字段添加索引？表与表之间的关联？**
>性别是否需要索引？​
  **不需要，区分度不高的字段**。只有**2种取值**的字段,建了索引数据库也不一定会用,只会白白增加索引维护的额外开销,因为索引也是需要存储的,所以插入和更新的写入操作,同时需要插入和更新你这个字段的索引的。所以说,**唯一性太差的字段不需要创建索引,即便用于where条件**

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508105646131.png)
1. 删除测试 Mybatis-plus 是否引入成功时创建的 user 表，执行如下语句

```SQL
DROP TABLE IF EXISTS `user
```

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508105905895.png)

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508110032940.png)



2. 建表，执行如下建表语句（或者使用 idea、可视化工具建表）


```SQL
CREATE TABLE `user` (​
​
    `username` varchar(256)                             NULL COMMENT '用户昵称',​
    `id` bigint NOT NULL AUTO_INCREMENT                 COMMENT 'id',​
    `userAccount` varchar(256)                          NULL COMMENT '账号',​
    `avatarUrl` varchar(1024)                           NULL COMMENT '用户头像',​
    `gender` tinyint                                    NULL COMMENT '性别',​
    `userPassword` varchar(512)                         NOT NULL COMMENT '密码',​
    `phone` varchar(128)                                NULL COMMENT '电话',​
    `email` varchar(512)                                NULL COMMENT '邮箱',​
    `userStatus` int DEFAULT '0'                        NULL COMMENT '状态 0-正常',​
    `createTime` datetime DEFAULT CURRENT_TIMESTAMP     NULL COMMENT '创建时间',​
    `updateTime` datetime DEFAULT CURRENT_TIMESTAMP     NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',​
    `isDelete` tinyint  DEFAULT '0'                     NOT NULL COMMENT '是否删除',​
    PRIMARY KEY (`id`)​
​
) COMMENT='用户表';
```

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508110142802.png)

## 规整项目目录

- 新建 controller、service、utils 包，删除测试 Mybatis-plus 是否引入成功时创建的 User、UserMapper、SampleTest
> 一般SpringBoot项目都是比较固定的，每个层干什么都有规范


![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508110314234.png)

[【图解 Spring Boot 五层结构】](https://blog.csdn.net/huzia/article/details/124345353)

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508110417431.png)

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508110601818.png)

## ✔注册功能

### 后端-代码生成器的使用

Mybatis-X插件，自动根据数据库生成 ​
- domain（实体对象）​
- mapper（操作数据库的对象）​
- mapper.xml（定义了mapper对象和数据库的关联，可以在里面自己写SQL）​
- service（包含常用的增删改查）​
	- serviceImpl（具体实现service）
#### 1. 插件的安装

>File -> Settings -> Plugins -> 搜索MyBatisX -> Install​

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508110932611.png)

#### 2. 插件的使用

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508111012828.png)

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508111028834.png)

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508111046702.png)

![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508111104754.png)

>勾选 Comment 可以在生成的实体类添加注释​
  勾选 Actual Column 可以让生成实体类的字段名和数据库保持一致

3. 代码整合​
- domain 放入 model 包​
- UserMapper 放入mapper 包​
- impl 和 UserService 放入 service 包​
- 删除 generator
4. 测试​
- 鼠标放在 UserService.java 文件的 UserService 上，按住 alt + enter ，选择创建测试类
![image.png](https://imgsbo.oss-cn-shanghai.aliyuncs.com/undefined20250508112233248.png)
